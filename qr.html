<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QR — Abarth Simca — Quick Access</title>
  <style>
    :root {
      --bg: #071424;
      --card: #0b1726;
      --muted: #b9c3cf;
      --accent: #c8ab6e;
      --radius: 12px;
      color: #eae7e1;
      font-family: system-ui, -apple-system, sans-serif;
    }
    body {
      margin: 0;
      background: linear-gradient(180deg, var(--bg), #032233);
      color: var(--muted);
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .card {
      background: var(--card);
      padding: 20px;
      border-radius: var(--radius);
      max-width: 520px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0,0,0,.5);
      border: 1px solid rgba(255,255,255,.04);
    }
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    .tab {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      background: transparent;
      border: 1px solid rgba(255,255,255,.04);
      color: var(--muted);
      text-align: center;
      cursor: pointer;
    }
    .tab[aria-selected="true"] {
      background: linear-gradient(180deg, rgba(200,171,110,.06), rgba(255,255,255,.02));
      color: #eae7e1;
      border-color: rgba(200,171,110,.18);
    }
    .panel {
      display: none;
      padding: 12px;
      border-radius: 8px;
      background: rgba(255,255,255,.02);
      color: var(--muted);
    }
    .panel.is-active {
      display: block;
    }
    a.action {
      display: inline-flex;
      gap: 10px;
      align-items: center;
      padding: 10px 12px;
      border-radius: 8px;
      color: var(--accent);
      text-decoration: none;
    }
    button.play {
      padding: 8px 12px;
      border-radius: 8px;
      background: var(--accent);
      color: #071424;
      border: none;
      cursor: pointer;
    }
    footer {
      margin-top: 14px;
      font-size: 13px;
      color: rgba(234,231,225,.6);
    }
  </style>
</head>

<body>
  <main class="card" role="main" aria-labelledby="title">
    <h1 id="title" style="margin:0 0 12px;color:#eae7e1;font-size:18px">
      Abarth Simca — Quick Access
    </h1>

    <div class="tabs" role="tablist" aria-label="Sezioni">
      <button class="tab" role="tab" id="tab-1" aria-selected="true" data-target="p1">Istruzioni d'uso</button>
      <button class="tab" role="tab" id="tab-2" aria-selected="false" data-target="p2">Ascolta storia</button>
      <button class="tab" role="tab" id="tab-3" aria-selected="false" data-target="p3">Dettagli</button>
    </div>

    <section id="p1" class="panel is-active" role="tabpanel" aria-labelledby="tab-1">
      <a class="action" href="IstruzioniUso.pdf" target="_blank" rel="noopener">
        Apri il manuale (PDF)
      </a>
    </section>

    <section id="p2" class="panel" role="tabpanel" aria-labelledby="tab-2">
      <div style="display:flex;gap:12px;align-items:center">
        <button class="play" id="playBtn" type="button" aria-pressed="false">Play storia</button>
        <span style="color:var(--muted)">abarthsimcastoria.mp3</span>
      </div>
      <audio id="story" src="abarthsimcastoria.mp3" preload="none"></audio>
    </section>

    <section id="p3" class="panel" role="tabpanel" aria-labelledby="tab-3">
      <a class="action" href="index2.html" target="_blank" rel="noopener">
        Apri la scheda dettagliata
      </a>
    </section>

    <footer>
      Scansiona il QR per aprire questa pagina.  
      Se il telefono è in rete locale usa l'URL  
      <span id="sampleUrl" style="color:var(--accent)"></span>
    </footer>
  </main>

  <script>
    // Gestione tab
    document.querySelectorAll('.tab').forEach(t => {
      t.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(x => x.setAttribute('aria-selected','false'));
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('is-active'));
        t.setAttribute('aria-selected','true');
        document.getElementById(t.dataset.target).classList.add('is-active');
      });
    });

    // Audio play/pause
    (function() {
      const btn = document.getElementById('playBtn');
      const audio = document.getElementById('story');
      btn?.addEventListener('click', async () => {
        try {
          if (audio.paused) {
            await audio.play();
            btn.textContent = 'Pausa';
            btn.setAttribute('aria-pressed','true');
          } else {
            audio.pause();
            btn.textContent = 'Play storia';
            btn.setAttribute('aria-pressed','false');
          }
        } catch(e) {
          console.warn(e);
          window.open('abarthsimcastoria.mp3','_blank');
        }
      });
      audio?.addEventListener('ended', () => {
        btn.textContent = 'Play storia';
        btn.setAttribute('aria-pressed','false');
      });
    })();

    // Mostra IP di esempio
    document.getElementById('sampleUrl').textContent = 'http://<TUO_IP>:8000/qr.html';
  </script>
</body>
</html>

